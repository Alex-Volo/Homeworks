<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework 8</title>
</head>

<body>


    <script>


        // Если вас незаслуженно обидели - вернитесь и заслужите!


        // ЗАДАНИЕ 1

        /*Написать функцию, которая на вход принимает массив чисел и callback-функцию. 
        Функция должна возвращать целое число, в зависимости от callback это может быть 
        сумма всех чисел массива, произведение. Функции, вычисляющие произведение и 
        сумму чисел массива, также необходимо реализовать.*/


        function getResult(arr, operation) {
            return Math.round(operation(arr));
        }

        const sum = (arr) => {
            return arr.reduce((sum, element) => sum + element, 0);
        }

        const mult = (arr) => {
            return arr.reduce((product, element) => product * element, 1);
        }

        console.log(getResult([3, 4, 1, 9], mult)); //108
        console.log(getResult([3, 4, 1, 9], sum)); //17


        // ЗАДАНИЕ 2

        // Дан массив объектов, необходимо отсортировать элементы массива в порядке увеличения возраста.

        const users = [
            { name: 'Jon', age: 22 },
            { name: 'Richard', age: 18 },
            { name: 'Anton', age: 32 },
            { name: 'Lida', age: 23 },
            { name: 'Bob', age: 44 }
        ];

        console.log(users.sort((a, b) => a.age - b.age));


        // ЗАДАНИЕ 3

        /*Создайте функцию each, которая может производить любые манипуляции над переданным массивом, в зависимости от переданной callback-функции. Реализуйте несколько callback-функций, которые будут делать следующее:
        - переворачивать массив
        - преобразовывать все элементы к числу, если элемент получился NaN, то удалять его*/

        const each = (arr, operation) => {
            return operation(arr);
        }

        const reverseArr = (arr) => arr.reverse();

        const toNumberArr = (arr) => {
            let resultArr = [];

            arr.forEach((element) => {
                if (!isNaN(+element)) {
                    resultArr.push(+element);
                }
            });

            return resultArr;
        }

        const arr = [1, '4', 9, 'two'];
        console.log(each(arr, reverseArr)); // ['two', 9, '4', 1]

        const arr1 = [1, '4', false, 9, 'two'];
        console.log(each(arr1, toNumberArr)); // [1, 4, 0, 9]


        // ЗАДАНИЕ 4

        /*Напишите программу, которая на протяжении 30 секунд, каждые 3 секунды, 
        будет выводить в консоль текущую дату. 
        Последней строкой, должно вывести сообщение "30 секунд прошло"*/

        function printDateAtInterval() {
            const idPrintInterval = setInterval(printCurrentDate, 3000);
            setTimeout(() => {
                clearInterval(idPrintInterval);
                console.log('30 секунд прошло');
            }, 30000, idPrintInterval);
        }

        function printCurrentDate() {
            let currentDate = new Date();
            console.log(currentDate);
        }

        // printDateAtInterval(); 


        // ЗАДАНИЕ 5

        /*У нас есть код, имитирующий телефонный звонок:
        function calling() {
            console.log('Звоню!')
        };

        function beeps() {
            setTimeout(() => {
                console.log('Идут гудки...')
            }, 1000);
        }
        function talk() {
            console.log('Разговор')
        }
        calling();
        beeps();
        talk();
        Сейчас, если его запустить, то последовательность будет
        'Звоню!', 'Разговор','Идут гудки…'

        Но 'Разговор' всегда начинается после 'гудков', поэтому вам нужно исправить данный код так, что бы выводилась верная последовательность:
        'Звоню!','Идут гудки…','Разговор'*/

        function calling() {
            console.log('Звоню!');
        };

        function beeps(callback) {
            setTimeout(() => {
                console.log('Идут гудки...');
                callback();
            }, 1000);
        }
        function talk() {
            console.log('Разговор')
        }

        calling();
        beeps(talk);
        // talk();
        // Вообще не понял смысла этого задания... Ладно, если бы формировали одну функцию call,
        // а так всё суета и тлен... Или я не понял условий задания.


    </script>
</body>

</html>